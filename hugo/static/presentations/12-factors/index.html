<!doctype html>
<html lang="fr">

	<head>
		<meta charset="utf-8">

		<title>ðŸ’» - 12 Factor Apps</title>

		<meta name="description" content="Un petit BBL sur Les 12 factor Apps">
		<meta name="author" content="Pierre Baillet">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/sky.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-markdown
					data-separator="^==\n" data-vertical="^=\n" data-notes="^Note:" data-charset="utf-8">
# Les Apps 12-facteurs
une prÃ©sentation sur le pouce par **Pierre Baillet**

*@octplane* sur twitter

pierre@baillet.name

Avril 2016

=
## Qui-suis-je ?
- Consultant Senior, Manager Technique chez IPPON Technologies
- Dev/Ops chez fotopedia pendant 4 ans
- Directeur du dÃ©veloppement puis de la production chez IDM pendant 8 ans
- DÃ©veloppe des applications depuis 1993

=
# Plan

- Historique et Philosophie
- Les 12 FACTORS
- Conclusion et dÃ©bat

==
# Historique
#### et
# philosophie
=
# The 12-factor App

- manifeste philosophique
- issu de la pratique DevOps
- rÃ©digÃ© par la communautÃ© et Adam Wiggins de Heroku, en 2011
- presque devenu un classique de la littÃ©rature

=
# Mieux dÃ©velopper

- 12 facteurs - valeurs clÃ©s
- meilleure scalabilitÃ©
- meilleure intÃ©gration aux opÃ©rations
- meilleure indÃ©pendance vis-Ã -vis des plateformes cibles
- mini-mode d'emploi, agnostique par rapport Ã  la technologie
- source d'inspiration et de dÃ©bat !

==
# Les 12 FACTORS

=
## I. Base de code
*Une base de code suivie avec un systÃ¨me de contrÃ´le de version, plusieurs environnements*

- utilisation du contrÃ´le de source
- une application  = une base de code. Si on a besoin de plusieurs base de code, cf. II
- chaque base de code peut Ãªtre dÃ©ployÃ©e de multiples fois (version pour le dev', le test, la prÃ©-prod, ...)

> pour les dev' ðŸ’» : transmission de code simplifiÃ©e

> pour les ops ðŸ”§ : facile Ã  manipuler

> en production ðŸ’µ : audit et historique


=
## II. DÃ©pendances
*DÃ©clarez explicitement et isolez les dÃ©pendances*

- pas de dÃ©pendance "implicite" sur le systÃ¨me cible
- y compris au niveau des outils systÃ¨mes (curl, p. ex.)
- **dÃ©claration** explicite des dÃ©pendances via un gestionnaire de dÃ©pendances
- **isolation**  lors du build des dÃ©pendances

> pour les dev' ðŸ’» : onboarding plus rapide

> pour les ops ðŸ”§ : auditabilitÃ©

> en production ðŸ’µ : vendor et cache

=
## III. Configuration
*Stockez la configuration dans lâ€™environnement*

- configuration = ce qui varie d'un environnement Ã  l'autre
- Ã  stocker en dehors des app. (pas de constante de conf. dans les applications)
- dans les variables d'environnement
- agnostique Ã  la techno ou au langage utilisÃ©

> ðŸ’»  : facile Ã  inspecter, modifier

> ðŸ”§  : audit 

> ðŸ’µ  : isolation, interopÃ©rable

=
## IV. Services externes
*Traitez les services externes comme des ressources attachÃ©es*

- service externe = systeme, service sur lequel se connecte votre application
- isoler de la mÃªme faÃ§on les services locaux et les services tiers
- via la configuration, permettre de facilement les substituer

> ðŸ’»  : facile Ã  connecter sur d'autres systÃ¨mes

> ðŸ”§  : interaction simple Ã  analyser

> ðŸ’µ  : HA facilitÃ©, sÃ©curitÃ© et flux

=
## V. Build, release, run
*SÃ©parez strictement les Ã©tapes dâ€™assemblage et dâ€™exÃ©cution*

- la construction se fait lorsqu'un commit est envoyÃ© dans une branche ailleurs qu'en dÃ©veloppement
- l'artefact construit est immuable et est stockÃ©
- le lancement est fait en production Ã  partir de l'artefact et de la configuration
- chaque artefact est unique, numÃ©rotÃ© et immuable

> ðŸ’»  : testabilitÃ©

> ðŸ”§  : immutabilitÃ©

> ðŸ’µ  : audit, replication, DRP

=
## VI. Processus
*ExÃ©cutez lâ€™application comme un ou plusieurs processus sans Ã©tat*

- les applications sont stateless, et stockent leur Ã©tat dans les systÃ¨mes tiers (stateful, eux)
- stockage sur le FS temporaire, ou pour cacher, mais pas de garantie
- les assets packagÃ©s sont assemblÃ©s lors du build de l'artefact et pas lors du run

> ðŸ’»  : rÃ©cupÃ©ration des environnements facilitÃ©s

> ðŸ”§  : pas de donnÃ©es compliquÃ©es Ã  stocker, dÃ©ploiements plus sÃ»rs

> ðŸ’µ  : scalabilitÃ©, rÃ©silience

=
## VII. Associations de ports
*Exportez les services via des associations de ports*

- les applications ne doivent pas compter sur l'environnement au moment de leur dÃ©marrage pour Ãªtre exposÃ©es sur internet
- elles doivent contenir le serveur qui leur permettra de tourner de maniÃ¨re autonome
- l'environnement d'exÃ©cution permettra lui de faire le lien avec l'extÃ©rieur (proxy, redirection de port...)

> ðŸ’»  : facilitÃ© de dÃ©ploiement en local

> ðŸ”§  : meilleur audit cÃ´tÃ© rÃ©seau

> ðŸ’µ  : scalabilitÃ©

=
## VIII. Concurrence
*Grossissez Ã  lâ€™aide du modÃ¨le de processus*

- les modÃ¨les de croissance Ã  l'intÃ©rieur d'une mÃªme VM sont souvent limitÃ©s
- l'utilisation de processus de types variÃ©s (web, worker, ...) permet une croissance horizontale infinie
- en interne, l'utilisation de threads est bien entendu possible

> ðŸ’»  : moins de souci en context "multi"

> ðŸ”§  : scalabilitÃ© accrue

> ðŸ’µ  : croissance horizontale facile 

=
## IX. Jetable
*Maximisez la robustesse avec des dÃ©marrages rapides et des arrÃªts gracieux*

- les applications doivent supporter des dÃ©marrages et arrÃªts "rapides"
- quelques secondes pour le dÃ©marrage
- pour l'arrÃªt suivant le type d'app, peut Ãªtre plus ou moins simple : fin des requÃªtes en cours, rejet du job courant, ...

> ðŸ’»  : bootstrap plus simple

> ðŸ”§  : pas de cas de conscience en cas de souci

> ðŸ’µ  : meilleure maintenance et rÃ©silience

=
## X. ParitÃ© dev/prod
*Gardez le dÃ©veloppement, la validation et la production aussi proches que possible*

- combler le fossÃ© temporel, de personnes et techniques
- fossÃ© temporel : agilitÃ© pour les dÃ©ploiements
- fossÃ© des personnes : faire travailler dev et ops ensemble depuis la conception jusqu'Ã  la maintenance
- fossÃ© technique : mÃªme systÃ¨me externes et version entre les environnements

> ðŸ’»  : plus facile de dÃ©velopper

> ðŸ”§  : moins d'Ã©cart technique

> ðŸ’µ  : moins de bugs, meilleure productivitÃ©

=
## XI. Logs
*Traitez les logs comme des flux dâ€™Ã©vÃ¨nements*

- pas vraiment le problÃ¨me de l'application
- logger sur la stdout, sans buffer
- l'environnement d'exÃ©cution capture, route puis gÃ¨re ce flux d'Ã©vÃ¨nements
- systÃ¨mes d'analyse et de graphes tiers

> ðŸ’»  : facile Ã  auditer

> ðŸ”§  : facile Ã  router et Ã  traiter

> ðŸ’µ  : meilleure analyse

=
## XII. Processus dâ€™administration
*Lancez les processus dâ€™administration et de maintenance comme des one-off-processes*

- les processus d'administration exÃ©cutent du code qui est livrÃ© avec l'application
- tournent dans les mÃªme contextes d'environnement et d'exÃ©cution que l'application
- sont des "one-off"
- peuvent Ãªtre surveillÃ©s par l'environnement

> ðŸ’»  : plus facile Ã  dÃ©velopper en synchro avec le code principal

> ðŸ”§  : plus facile Ã  dÃ©ployer

> ðŸ’µ  : stabilitÃ© accrue

==
# Conclusion & dÃ©bat

- http://12factor.net/ : version en franÃ§ais
- Faites des applications !
- Transformez vos applications classiques en applications 12-factor
- Essayez et trompez-vous !
- Parlez-en Ã  vos amis.


##### et merci...
==
### Et vous, comment mettez-vous en place le 12 factor ?


- Base de code
- DÃ©pendances
- Configuration
- Services externes
- Build, release, run
- Processus
- Associations de ports
- Concurrence
- Jetable
- ParitÃ© dev/prod
- Logs
- Processus dâ€™administration

				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme || 'moon', // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'zoom', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				parallaxBackgroundImage: './shutterstock_360523100.jpg',
				parallaxBackgroundSize: '2000px 1333px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>
		<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-824762-1', 'auto');
  ga('send', 'pageview');

</script>

	</body>
</html>
